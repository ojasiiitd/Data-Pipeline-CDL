{% extends 'index.html' %}

{% block title %} Report {% endblock %}

{% block body %}

<div class="container mt-4">
    <h2>Report</h2>

    <h4>Task 1 : {{ task1 }}</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Key</th>
                <th>Value</th>
            </tr>
        </thead>
        <tbody>
            {% for key, value in report_1.items() %}
            <tr>
                <td>{{ key }}</td>
                <td>{{ value }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Column Name</th>
                <th>{{ 'Information on Missing Data' if task1 == 'Missing Values Processing' else 'Information on Duplicate Data' }} </th>
            </tr>
        </thead>
        <tbody>
            {% for elt in report_content %}
                {% for ops in elt %}
                    {% if ops[0] == 'missing_vals_report' %}
                        {% for kv in ops[1] %}
                            <tr>
                                <td><b>{{ kv[0] }}</b></td>
                                <td style="color: {{ 'green' if kv[1] == 'True' else 'red' }};">
                                    {{ 'Less missing data than the threshold. You may use this column!' if kv[1] == 'True' else 'There\'s more missing data than the threshold. Data in this column is not suitable for use.' }}
                                </td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        {% for kv in ops[1] %}
                            <tr>
                                <td><b>{{ kv[0] }}</b></td>
                                <td>{{ kv[1] }}</td>
                            </tr>
                        {% endfor %}            
                    {% endif %}
                {% endfor %}
            {% endfor %}
        </tbody>        
    </table>

    <h4>Task 2 : {{ task2 }}</h4>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Key</th>
                <th>Value</th>
            </tr>
        </thead>
        <tbody>
            {% for key, value in report_2.items() %}
            <tr>
                <td>{{ key }}</td>
                <td>{{ value }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Column Name</th>
                <th>{{ 'Information on Missing Data' if task1 == 'Missing Values Processing' else 'Information on Duplicate Data' }}</th>
            </tr>
        </thead>
        <tbody>
            {% for elt in report_content %}
                {% for ops in elt %}
                    {% if ops[0] == 'missing_vals_report' %}
                        {% for kv in ops[1] %}
                            <tr>
                                <td><b>{{ kv[0] }}</b></td>
                                <td style="color: {{ 'green' if kv[1] == 'True' else 'red' }};">
                                    {{ 'Less missing data than the threshold. You may use this column!' if kv[1] == 'True' else 'There\'s more missing data than the threshold. Data in this column is not suitable for use.' }}
                                </td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        {% for kv in ops[1] %}
                            <tr>
                                <td><b>{{ kv[0] }}</b></td>
                                <td>{{ kv[1] }}</td>
                            </tr>
                        {% endfor %}            
                    {% endif %}
                {% endfor %}
            {% endfor %}
        </tbody>        
    </table>
</div>

{% endblock %}
